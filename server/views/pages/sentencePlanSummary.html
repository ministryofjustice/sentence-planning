{% extends "../partials/offenderDetailsLayout.html" %}

{% from "error-summary/macro.njk" import govukErrorSummary %}

{% block content %}
{% if errors.length > 0 %}
  {{ govukErrorSummary({
    titleText: "There is a problem",
    errorList: errors
  }) }}
{% endif %}
<div class="govuk-body">
  <h1 class="govuk-heading-xl">My progress</h1>
  <h2 class="govuk-heading-m">{{forename1}} {{familyName}}</h3>
  {% if steps.length > 0 %}
    <h3 class="govuk-heading-s">I'm working on {{steps | length}} step{% if steps.length > 1 %}s{% endif %}</h3>
    <table class="govuk-table">
      <tbody class="govuk-table__body">
        {% for step in steps %}
          <tr class="govuk-table__row" id="step{{step.stepId}}">
            <td class="govuk-table__cell">{{step.step}}</td>
            <td class="govuk-table__cell align-right nowrap">{{step.friendlyStatus}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <h3 class="govuk-heading-s">I'm not working on any steps.</h3>
  {% endif %}
  {% if pastSteps.length > 0 %}
    <h3 class="govuk-heading-s">I've finished {{steps | length}} step{% if pastSteps.length > 1 %}s{% endif %}</h3>
    <table class="govuk-table">
      <tbody class="govuk-table__body">
        {% for step in pastSteps %}
          <tr class="govuk-table__row" id="step{{step.stepId}}">
            <td class="govuk-table__cell">{{step.step}}</td>
            <td class="govuk-table__cell align-right nowrap">{{step.friendlyStatus}}</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <h3 class="govuk-heading-s">I haven't finished any steps yet.</h3>
  {% endif %}


</div>
{% endblock %}
